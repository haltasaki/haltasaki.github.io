<!-- *********** heading *********** -->
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=SHIFT_JIS">
<title>
Remote Lecture / Tips
</title>
<link rel="stylesheet" href="mb.css" type="text/css">
</head>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
</script>
<body>

<!-- *********** top ***********

 -->
 <p align="right">
<a href="index.html">元のページへ</a>
</p>
<h1>
遠隔授業教材の作成に関するメモ
</h1>
<!-- *********** main *********** -->
<p align="right"><SMALL>公開 2020 年 3 月 28 日 / 更新 2020 年 3 月 30 日 </SMALL>
<p>

この「ギガに優しい遠隔授業」は 20200 年 3 月 27 日の午後に思い切って作ったもの。
教材の作成（ノートを書いて、トークを録音）は三時間弱で終わったけれど、周辺の細かい技術的なことで悩んで、結局は、この日の後半をずっと使ってしまった（そもそも Mac でどうやって録音するかですごく時間を取ってしまった）。
<p>
素晴らしかったのは、夜の 10 時前に最初のバージョンを公開したところ、たちまち多くの人に試聴してもらえて、技術的な問題点について多くのアドバイスをもらえたことだ。このおかげで、一気に実用に使えるフォーマットができたと思う。
みなさんに感謝します。
<p>
以下、主に自分のため、また同様の試みをする同業者のために、いくつかの点をメモしておく（新学期までに遠隔授業のシステムを確立しようと焦っている人が多いと想定しています。そういう人たちに少しでも役に立つことを目指しているので、このメモにはどんどん追加で書き足しています。スタイルや記述が不統一ですがお許しを）。

<h2>
利用目的
</h2>
実はこのフォーマットでやろうとしていることは二つある。
<p>
一つは本当の意味での遠隔授業。ぼくは家で教材を作成し、聴講者は好きな場所で聞ける。
正規の講義で用いる際には原則として教材は非公開にするのだろう。
これに加えて、課題の提出と採点、メール等で質問するシステムを整えれば、かなりしっかりした教育ができると信じる。
（最初は「専用掲示板」にも言及していたのだが、掲示板は常に「荒らし」が発生するリスクがあるので（そして、それで閉鎖したりすると精神的ダメージが大きいので）不適切と判断。）
<p>
こういう使い方を想定して<a href="sample.html">講義のサンプルページ</a>を作ってみた。
<p>
もう一つは、大学で通常の授業をする際の欠席者へのサービス。
<p>
これから当面は（←かなり長いと思っている（場合によっては半永久的））「軽い風邪でも積極的に休んでください」と学生を指導することになる。
そうなると、「講義に出るのは当たり前、欠席は自己責任」とは言えなくなる。
<p>
そこで、講義の前にしっかりとした講義ノートを作り、また講義でのトークを全てそのまま録音し、それらをこのフォーマットで履修者に提供する。
残念ながら学生はその場での質問等はできないが、かなりのことが学べるだろう。
（これは、授業中のアドリブでの板書がやりづらくなるのだが、場合によっては、アドリブで板書したことをあとでまとめて講義ノートに追加することもできる。余分な手間ではあるが、仕方がない。）


<h2>
基本思想
</h2>
Zoom を使えば遠隔からでもインタラクティブな講義ができるし、学生は決まった時間にきちんと講義が受けられて生活のメリハリもつく --- というのは正しいのだが、そういう本格的な遠隔講義には問題もある。
<p>
すでに書いているように、スマホだけでネットにアクセスしている学生にとっては通信料の負担がバカにならない。「ギガが切れたんで講義に出れない」という状況も十分にありうる。
さらに、教員のサイドでも Zoom 等のシステムを利用する負担は大きい。単に講義をするだけでなく、カメラ（あるいは、別の映像を送る装置）を設営し、学生たちがきちんと接続できているかをチェックするなどなどの仕事が出てくる。授業時間が決まっている中で、ネット関係の（多くの場合、自明な）トラブルで時間が過ぎていくのは虚しいことだ（そして、そういう事故がすごく多いことをみなさんよくご存知だと思う）。
より実際的な話をすれば、今の日本の大学教員で、Zoom を使った遠隔授業をしなさいと言われて何回かの講習を受けてマニュアルを読んですぐに対応できる人というのは（いいか悪いかは別として）ごく一部だというのが実情だとも思う。
<p>
そこで、ここでは、<strong>Zoom のような高級なサービスはいっさい利用せず、ごく基本的な画像ファイルと音声ファイルの配信だけで、最も効率的な遠隔授業を行なう</strong>ことを目指した。
「ギガに優しい」と書いたように、受講する側の通信料を抑えることを最優先に考える。
また、教員サイドにとっても、不慣れなビデオの準備などに時間を使わず、ほとんど特別な機材を使わず、簡単に教材が用意できることを優先した。
<p>
当初は、pdf ファイルと音声ファイルをどちらも保存してもらって聴講するというスタイルを想定していた。
しかし、iPhone では音声ファイルのダウンロードが簡単ではないと判明したこと、それ以上に、そもそも音声ファイルは何度も聞くものではないと気づいたので、pdf はローカルに保存、音声ファイルはその場でブラウザで再生して保存はしないという設計にした。
（通常の講義だって、一回聞いて、後に記憶と知識と講義ノートが残る。）
<p>
これに対応して、ファイルへのリンクでは、pdf についてだけ明示的に download というタグが入れてある。html のソースをご覧ください。

<h2>
講義ノート
</h2>
これは別に特別なことはなくて書くだけ。
<p>
ただし、普通と違って公開するので緊張するし時間がかかった。
シャーペンで書いてからスキャンしてるのはぼくが古い人間だからで、こういうのは iPad とかでペンで最初からファイルを作ればいいんですよね。
<p>
一つ重要なのはページ数を書くこと。また、講義では数式に式番号をふることはないけれど、こういう場合はしっかりと書いておいたほうがいい。講義の中で言及しやすいから。さらに、遠隔授業の場合は、メールや掲示板で質問を受け付けるから、その際にも番号は重宝する。
<p>
もちろん、手書きノートじゃなくてパワーポイントのスライドを pdf にしたものなどを使う人もいると思います（緊急時とはいえ著作権にはご注意ください）。


<h2>
録音
</h2>
（ぼくが使った方法については下の「Mac で講義を録音して複数のファイルから一つの圧縮したファイルを作る方法」をご覧ください。何も知らなくてもわかるように書きました。（ただし OS は古い。））
<p>
Mac（未だに Siera を使ってます）に付属の QuickTime Player で録音した。<code>File -> New Audio Recording</code> を選んで録音ボタンを押すだけなのだが、最初、どうやってポーズするのかわからずにめっちゃ苦労した。
実は、alt/option ボタンを押し込むと、停止ボタンがポーズボタンに変わるという、すごく分かりにくい XX 仕様だった。俺の時間を返せ。
<p>
それでも、ポーズするつもりで停止したりというトラブルがあった。
いや、それも、複数の音声ファイルをつないで一つにする方法がわかれば大きな問題にはならないんだけど、そのやり方がわからなかったので苦労した（今はわかりました。下を参照）。
<p>
講義ノートを見ながら話をするという点では普段の講義と同じなのだが、途中で好きな時に録音をポーズできるというのは大きなアドバンテージだ。
切れ目のいいところでポーズして、飲み物を飲んで喉を潤したり、次のノートを熟読して頭に入れて説明を考えたり、といったことができる。
目の前にいる学生の反応が見られないのは激烈なハンディだが、その代わり、トークの質を上げることはできるかもしれないと思った。
<p>
しかし、こうやってできた録音ファイルはかなり大きいことに気づいた。30 分で 50 MB くらい。
まあ、音楽を録音することも想定しているんだろうし、それは仕方がない。
動画に比べれば小さいだろうと思ったけれど、これはほどほどのサイズだしダウンロードにも時間がかかる。
<p>
ぼくは、その後、やり方を教わってこれを 10 分の 1 くらいのサイズに圧縮することができた。
教えてくださった方に感謝している。
これは別に難しくはないけれど、一応、Mac の Terminal というのを使う必要があるので、下に別にやり方を書いておく。
<p>
ただ、動画を見せることに比べたら、50 MB を一時的にダウンロードする（そして、ローカルには残さない）くらいは気にしないでいいのかもしれない。
<p>
録音する際に注意したのは、何しろ動きが全くないので、講義ノートの同じ部分を聴講者にも見てもらえるよう、しつこく、ページ番号や式番号に言及しているということくらいか。
<p>
あと、聴講者が再生を頻繁にポーズするのは（特にスマホでは）不便なので、なるべく、ポーズなしにそのまま聴けるように話すのがいいだろうとアドバイスをもらった。
<p>
トークの中身については、もちろん、みなさんの個性でやってください。
ぼくのサンプルは一発録りだけあって、グダグダになってるところもありますが、それはそれでライブ感があっていいと思うことにします。
また、これは生まれて初めて無観客講義だったので、もっと上達するつもり。
（ちなみに、正規の学生向けのをやることになったら、くだけるところは、もっとくだけたものになるかもしれない。）

<h2>
web ページを作る際に
</h2>
ぼくがこのサンプルの教材を作るにあたって使ったのは Mac に付属のいくつかのアプリケーションと、あとはテキストエディターだけです。別に高級な道具はいりません。
<p>
一度もご自分で web ページを作ったことのない人には敷居が高いかもしれませんが、実際はやることは相当に簡単です。
<p>
例えば、学習院大学の環境では、大学のアカウントの然るべきところに然るべき名前のフォルダーを作り、その中に、適切なリンクを書き込んだ index.html というファイルと、あとは、pdf ファイルと、音声ファイルを入れるだけです。
ぼくの場合は、自宅から一歩も出ずに全ての作業ができます。
各大学などで担当の人とか、web が好きな人にお問い合わせください。
<p>
「適切なリンクを書き込んだ index.html というファイル」というのがわからないという方は、ものすごくシンプルですが、
<p>
<a href="templates/index.html" download="index.html">テンプレートの html ファイル</a>
<p>
をダウンロードしてご利用ください。
<p>
テキストエディターで中身を見ると、自ずから何をやっているかわかると思います。
講義が二つあることを想定して書いているので、減らしたり、増やしたりしてください。
明らかにファイル名を書くところがあるので、そこにご自分で作ったファイルの名前を書き込むだけです。

<h2>
<a name="mac">付録：Mac で講義を録音する方法</a>
</h2>
私が人に教わってうまくいった方法を書きます（Mac で Siera を使っています。時代遅れです）。
UNIX コマンドや Terminal の操作を全く知らないことを前提に書いてます（ぼくの知識もほぼゼロです）。
補足やコメントがあれば是非お願いします。
Windows のやり方はわかりません。わかっていて情報を提供してくださる人がいればありがたいです。
<p>
以下、音声ファイルを一つだけ作る場合と、音声ファイルを複数作ってくっつける場合（こちらが推奨）について書いておく。

<h3>
一つの音声ファイルを作り、それを圧縮する方法
</h3>
Quick Time Player で File -> New Audio Recording を選ぶ。
<p>
小さなウィンドウが出るので、録音ボタンをクリックすると録音が始まる。何も考えず Mac についている（どこ？）マイクを使ったが音質は十分だった。
<p>
録音を一時停止するときには option を押しながら、ウィンドウに出ているボタンをクリックする。またクリックすれば再開できる。
<P>
ウィドウに出ているボタンをクリックすると録音が終了する。Untitled と出てくるので、File -> Save... を選ぶと、いつものように保存先とファイル名を聞いてくるので、original.m4a のように名前をつけて作業用のフォルダーに保存。
<p>
これを圧縮して「ギガに優しい」音声ファイルにする。
<p>
そのために Terminal というアプリを開く。昔のコンピューターみたいなのが出てくる。
<p>
録音したファイルを加工するため、今、作業しているフォルダーに移動する。
そのために、まず terminal の端末に cd とスペースをタイプする。リターンは押さない。
そのまま Finder にいって、今、加工したいと思っている音声ファイルが入っているフォルダーを、Terminal のウィンドウに drag and drop する。
すると、cd の後に、このフォルダーの「番地」がタイプされる。
そこでリターンを押す。
これで、移動したはず。
Terminal に ls（エル、エス）とタイプしてリターンを押してみて、作業したいファイルの名前が出てくれば成功。
<p>
そうしたら、
<pre>
afconvert original.m4a -f m4af -d aacp -b 24000 -o compressed.m4a
</pre>
という呪文をタイプ（コピペ）してリターンを押す。
少し時間がかかるが、サイズが 10 分の 1 くらいになった音声ファイルができる。

<h3>
複数の音声ファイルを作り、それらをくっつけて一つの圧縮したファイルを作る方法
</h3>
Quick Time Player で File -> New Audio Recording を選ぶ。
<p>
小さなウィンドウが出るので、録音ボタンをクリックすると録音が始まる。何も考えず Mac についている（どこ？）マイクを使ったが音質は十分だった。
<p>
録音を一時停止するときには option を押しながら、ウィンドウに出ているボタンをクリックする。またクリックすれば再開できる。
<P>
ウィドウに出ているボタンをクリックすると録音が終了する。Untitled と出てくるので、File -> Save... を選ぶと、いつものように保存先とファイル名を聞いてくるので、001.m4a のように数字の名前をつけて決まった作業用のフォルダーに保存。
<p>
録音の最後でグダグダになってしまったので、そこはなしにしたいとかいうことは多いはず。
ファイルを選んだ状態で、Edit -> Trim とやると、なんか変な黄色い枠が出てくる（やってみて）。これで、枠の左右を動かすと、ファイルの前後を消すことができる。ま、やってみてください。割と直観的です。
<p>
複数のファイルをくっつけるつもりなので、以下、録音を続けて、002.m4a, 003.m4a といったファイルを作っていく。
<p>
最後に、これらのファイルを接合し、かつ圧縮して「ギガに優しい」音声ファイルにする。
<p>
そのために Terminal というアプリを開く。昔のコンピューターみたいなのが出てくる。
<p>
録音したファイルを加工するため、今、作業しているフォルダーに移動する。
そのために、まず terminal の端末に cd とスペースをタイプする。リターンは押さない。
そのまま Finder にいって、今、加工したいと思っている音声ファイルが入っているフォルダーを、Terminal のウィンドウに drag and drop する。
すると、cd の後に、このフォルダーの「番地」がタイプされる。
そこでリターンを押す。
これで、移動したはず。
Terminal に ls（エル、エス）とタイプしてリターンを押してみて、作業したいファイルの一覧が出てくれば成功。
<p>
そうしたら、
<pre>
afconvert 001.m4a -f adts -d 'aac '
afconvert 002.m4a -f adts -d 'aac '
afconvert 003.m4a -f adts -d 'aac '
afconvert 004.m4a -f adts -d 'aac '
afconvert 005.m4a -f adts -d 'aac '
cat *aac > merge.aac
afconvert merge.aac -f m4af -d aacp -b 24000
</pre>
という呪文を用意する。
ここで、ファイル名が入っている行は、実際にくっつけたいファイルに合わせて増減させる。
この呪文全体をコピーして、Terminal にペーストする。最後にリターンが必要かも。
少し時間がかかるが、うまくいくと、作業しているフォルダーの中にどんどん新しいファイルができる。
全部おわったところで、merge.m4a というファイルができているはずで、これが最終的に欲しいもの。
1時間のトークで 10 MB くらいのかなり小さなファイルができるはず。


<h2>
付録：Terminal を使った操作
</h2>
Mac の Terminal を使うと、強力な UNIX 系のコマンド（だと思う）を利用できる。
ぼくはほとんど知らないのだが、とりあえず、<code>cd</code> と <code>ls</code> だけは使える。
そうすると、人に教わった「魔法」を自分でも使えるようになる。
<p>
以下、今回教わった呪文をそのまま書いておく。
<h3>
サイズを小さくする方法
</h3>
Terminal から
<p>
<code>
afconvert Tasaki20200327_Part2.m4a -f m4af -d aacp -b 24000
</code>
<p>
とすれば十分の一くらいになる。それでも、講義ならば十分に聞ける音質だ。
<p>
補足（教えてもらったこと）：オプションはそれぞれ
<pre>
-f フォーマット名 でMPEG4
-d 圧縮データ形式指定 で高圧縮に向いているHE-AACv2
-b ビットレート で24kbps
</pre>
と言う意味です．別名にするには -oオプションを追加して -o 新規ファイル名.m4a などします．

<h3>
複数の m4a ファイルを結合し、さらに圧縮もかける
</h3>
まず、結合すべきファイルたちに、結合したい順番に番号をつけておく。
001.m4a, 002.m4a, 003.m4a みたいに。
これを一旦、ストリーム形式 (aac) というのに変換してから、それらをくっつけて、最後に圧縮した m4a にするための呪文が以下。
<pre>
foreach a (*m4a)
afconvert $a -f adts -d 'aac '
end
cat *aac > merge.aac
afconvert merge.aac -f m4af -d aacp -b 24000
</pre>
ただ、これをぼくの Terminal でやったら、最初のところがうまく動かなかった。
<p>
そこで、めっちゃバカっぽいけど、どうせファイルの個数は大して多くないだろうというので、
<pre>
afconvert 001.m4a -f adts -d 'aac '
afconvert 002.m4a -f adts -d 'aac '
afconvert 003.m4a -f adts -d 'aac '
afconvert 004.m4a -f adts -d 'aac '
afconvert 005.m4a -f adts -d 'aac '
cat *aac > merge.aac
afconvert merge.aac -f m4af -d aacp -b 24000
</pre>
みたいに個別で変換する呪文を実行してみたらうまくできた！
これで、複数のファイルに分けて録音しておいて、一発でくっつけて圧縮もできる！

<h3>
付記
</h3>
さらに、色々と教わった。私にはわからず実行できないのだが、他の人の役には立つかもしれないので、そのまま記載しておく。
<p>
ffmpegをインストールしている場合は結合と24kbps HE-AACv2への変換が一度に出来ます。例(m4aファイルが/Users/uota/に置かれてる場合)
ffmpeg -f concat -safe 0 -i <(printf "file '%s'\n" /Users/uota/*m4a) -c:a libfdk_aac -profile:a aac_he_v2 -b:a 24k 結合.m4a
<p>
講義など喋る場合、無音が多いのでビットレートを可変にした方が帯域を小さくせずともファイルサイズが小さくなります。それには-b:a 24kの部分を-vbr 1などとします(1が最低, 5が最高音質)




<p align="right">
<a href="index.html">元のページへ</a>
</p>



<hr>
<address>
<a href="../../indexJ.html">田崎晴明ホームページ</a>
</address>
</body>
</html>